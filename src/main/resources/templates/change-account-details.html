<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wulkanizacja Edek</title>

    <link rel="icon" type="image/x-icon" href="/images/icon/tire.svg">
    <link rel="stylesheet" href="/css/global.css">
    <link rel="stylesheet" href="/css/main-navigation.css">
    <link rel="stylesheet" href="/css/sign-in.css">
    <link rel="stylesheet" href="/css/account-menu.css">
    <link rel="stylesheet" href="/css/account-data.css">
    <link rel="stylesheet" href="/css/change-data.css">

</head>

<body>
<section class="banner__sign-in" th:replace="fragments/section-sign-in::section">
</section>

<section class="banner__sign-in banner__register" th:replace="fragments/section-registration::section">
</section>

<div class="scroll">
    <nav class="main-navigation" th:replace="fragments/nav::nav">
    </nav>
    <section class="my-account__menu">
        <div class="my-account__menu-container">
            <div class="my-account__left" th:replace="fragments/div-menu-account::div">
            </div>

            <div class="my-account__right">
                <div class="my-account__text">
                    <h2 class="my-account__text-header" th:text="${'Witaj ' + loggedUser.firstName}"></h2>
                </div>
                <div class="my-account--position">
                    <div class="my-account__info">
                        <div class="my-account__info-type">
                            <h2 class="my-account__info-header">Dane konta</h2>
                        </div>
                        <div class="my-account__info-data">
                            <form th:action="@{/account/change/details}" method="post" th:object="${loggedUser}">
                                <table class="my-account__info-table">
                                    <tr class="my-account__table-row">
                                        <td>Imię:</td>
                                        <td class="my-account__table-info">
                                            <input class="my-account__form-input" th:field="*{firstName}">
                                            <div class="my-account__form-error" th:if="${#fields.hasErrors('firstName')}" th:errors="*{firstName}"></div>
                                        </td>
                                    </tr>
                                    <tr class="my-account__table-row">
                                        <td>Nazwisko:</td>
                                        <td class="my-account__table-info">
                                            <input class="my-account__form-input" th:field="*{lastName}">
                                            <div class="my-account__form-error" th:if="${#fields.hasErrors('lastName')}" th:errors="*{lastName}"></div>
                                        </td>
                                    </tr>
                                    <tr class="my-account__table-row">
                                        <td>Adres e-mail:</td>
                                        <td class="my-account__table-info">
                                            <input name="email" th:field="*{email}" class="my-account__form-input" required>
                                            <div class="my-account__form-error" th:if="${#fields.hasErrors('email')}" th:errors="*{email}">Niepoprawny email</div>
                                            <div class="my-account__form-error" th:if="${errorEmail != null}">Podany email już istnieje</div>
                                        </td>
                                    </tr>
                                    <tr class="my-account__table-row">
                                        <td>Nazwa użytkownika:</td>
                                        <td class="my-account__table-info">
                                            <input name="userName" th:field="*{username}" class="my-account__form-input" required>
                                            <div class="my-account__form-error" th:if="${#fields.hasErrors('username')}" th:errors="*{username}">Tylko lietry i cyfry oraz minimum 3 znaki</div>
                                            <div class="my-account__form-error" th:if="${errorUsername != null}">Podana nazwa użykownika już istnieje</div>
                                        </td>
                                    </tr>
                                    <tr class="my-account__table-row">
                                        <td>Numer telefonu:</td>
                                        <td class="my-account__table-info">
                                            <input name="userName" th:field="*{phoneNumber}" class="my-account__form-input" required>
                                            <div class="my-account__form-error" th:if="${#fields.hasErrors('phoneNumber')}" th:errors="*{phoneNumber}">Podaj poprawny numer telefonu (np.: +48 123 456 789, 123 456 789)</div>
                                        </td>
                                    </tr>
                                </table>
                                <input type="hidden" name="scrollTo" value="${scrollTo}">
                                <button type="submit" class="my-account__form-button">Zapisz</button>
                            </form>
                        </div>
                    </div>
                    <div class="my-account__info">
                        <div class="my-account__info-type">
                            <h2 class="my-account__info-header">Adres dostawy</h2>
                            <a th:href="@{/account/change/address}" class="my-account__info-edit">Edytuj</a>
                        </div>
                        <div class="my-account__info-data">
                            <table class="my-account__info-table">
                                <tr class="my-account__table-row">
                                    <td>Ulica:</td>
                                    <td class="my-account__table-info" th:if="${loggedUser.address != null}" th:text="${loggedUser.address.street}"></td>
                                    <td class="my-account__table-info" th:if="${loggedUser.address == null}" th:text="Brak"></td>
                                </tr>
                                <tr class="my-account__table-row">
                                    <td>Numer budynku:</td>
                                    <td class="my-account__table-info" th:if="${loggedUser.address != null}" th:text="${loggedUser.address.numberOfBuilding}"></td>
                                    <td class="my-account__table-info" th:if="${loggedUser.address == null}" th:text="Brak"></td>
                                </tr>
                                <tr class="my-account__table-row">
                                    <td>Numer mieszkania:</td>
                                    <td class="my-account__table-info" th:if="${loggedUser.address != null}" th:text="${loggedUser.address.apartmentNumber}"></td>
                                    <td class="my-account__table-info" th:if="${loggedUser.address == null}" th:text="Brak"></td>
                                </tr>
                                <tr class="my-account__table-row">
                                    <td>Kod pocztowy:</td>
                                    <td class="my-account__table-info" th:if="${loggedUser.address != null}" th:text="${loggedUser.address.postalCode1} + '-' + ${loggedUser.address.postalCode2}"></td>
                                    <td class="my-account__table-info" th:if="${loggedUser.address == null}" th:text="Brak"></td>
                                </tr>
                                <tr class="my-account__table-row">
                                    <td>Miejscowość:</td>
                                    <td class="my-account__table-info" th:if="${loggedUser.address != null}" th:text="${loggedUser.address.city}"></td>
                                    <td class="my-account__table-info" th:if="${loggedUser.address == null}" th:text="Brak"></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<script src="/js/scroll.js"></script>
<script src="/js/main-navigation.js"></script>
<script src="/js/account-navigation.js"></script>
<script src="/js/summary.js"></script>
<script src="/js/account-menu.js"></script>
</body>

</html>